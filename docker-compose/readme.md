# Закидываем файл daemon.json в папку /etc/docker/
# открываем порт 9323  "firewall-cmd --permanent --zone=public --add-port=9323/tcp"
# Перезагрузите правила брандмауэра, чтобы применить изменения "firewall-cmd --reload"
# убеждаемся что нужные порты открылись firewall-cmd --list-all
# Перезапускаем docker  "systemctl restart docker
# Закинем файл  prometheus.yml в папку  где мы находимся.
# Отредактируем её. Вместо <PRIVATE_IP_ADDRESS> вбиваем IP адресс машины.
# Закинем файл docker-compose.yml в папку где мы находимся. Отредактируем его. Проверяем Volumes
# Далее создаём демон на автозапуск docker-compose-myappname.service после рестарта сервера.
# Включаем сервис: "sudo systemctl enable docker-compose-myappname"
# После чего запускаем docker-compose.  "docker-compose up -d "

Что мониторить?
Четыре золотых сигнала.
-Задержка — сколько времени занимает обработка запроса. Мы отдельно отслеживаем задержки при успешном выполнении и при ошибке. Успешное выполнение — это очевидная метрика, но и ошибки хотелось бы получать быстрее.
-Трафик — общая картина загруженности сервиса запросами. Для API это число запросов в секунду. Для стримингового сервиса с музыкой это объем данных, передаваемый в секунду.
-Ошибки. Ошибки могут быть явными (например, 500-е коды ошибок) или неявными. Неявная ошибка — это когда мы получаем ответ, но не с тем содержимым или со слишком большой задержкой.
-Насыщенность, или загруженность, нашего сервиса. Сколько еще нагрузки он выдержит? Обычно сервис ограничен ресурсами процессора или памяти. За этими ограничениями надо следить. В базе данных, например, нужно отслеживать свободное пространство.

К примеру;

-Задержки;
1) sum by(handler) (rate(products_app_requests_total[15s]))    ---- Количество запросов в секунду RPS по каждому handler(агрегация за 15 секунд)
2) sum(rate(products_app_requests_total[15s]))                 ---- Количество запросов в секунду RPS всего (агрегация за 15 секунд)

Ошибки;
1) sum rate(products_app_requests_total{code=-"4..|5.."}[15s])  by (handler)  /  sum rate(products_app_requests_total[15s])) by (handler) * 100 ---- Как быстро в секунду приходят (Error rate) ошибки за последние 15 секунд(всего). Я хотел показать сколько в процентном отношении от ошибок к общему количеству запросов.

Насыщенность; В качестве примера можно взять загрузку CPU и загрузку памяти.
1) Для CPU всякие cpu_total.
2) Для памяти же node memory MemFree_bytes,MemAvailable_bytes








